/*
 * squeezeBox v1.0 minified
 * By Rob Garrison (aka Mottie & Fudgey)
 * Dual licensed under the MIT and GPL licenses.
 *
 */
(function(b){b.squeezeBox=function(h,i){var a=this;a.$el=b(h);a.el=h;a.$el.data("squeezeBox",a);b.fn.invert=function(){return this.end().not(this)};a.init=function(){a.options=b.extend({},b.squeezeBox.defaultOptions,i);a.doc=b(document);a.win=b("html, body");a.headers=a.$el.children().filter(a.options.headers);a.allHeaders=a.$el.find(a.options.blockHeaders).add(a.headers);a.enabled=true;a.prevTop=0;a.lastTop=0;a.len=a.allHeaders.length;a.ui=a.options.useUI?"ui-":"sb-";a.wrapper="sb-overall-wrapper "+ a.ui+"accordion "+a.ui+"widget "+a.ui+"helper-reset";a.wrapper+=a.options.enableIcons?" "+a.ui+"accordion-icons":"";a.accordion=a.ui+"accordion-header "+a.ui+"helper-reset "+a.ui+"state-default "+a.ui+"corner-all";a.content=a.ui+"accordion-content "+a.ui+"helper-reset "+a.ui+"widget-content "+a.ui+"corner-bottom "+a.ui+"accordion-content-active";a.icon=a.options.enableIcons?a.ui+"icon":"";a.hover=a.ui+"state-hover";a.active=a.ui+"state-active";a.$el.addClass(a.wrapper).css("position","relative").find(a.options.blockHeaders).css({zIndex:a.options.zIndex}); a.headers.hover(function(){b(this).addClass(a.hover)},function(){b(this).removeClass(a.hover)}).find("a").click(function(){return false});a.allHeaders.click(function(){a.setHeader(a.allHeaders.index(b(this)))}).each(function(){b(this).is(a.options.blockHeaders)||b(this).wrapInner('<a href="#"></a>').addClass(a.accordion).prepend('<span class="'+a.icon+" "+a.options.openIcon+'"></span>').next().addClass(a.content);b(this).css({height:b(this).height(),zIndex:a.options.zIndex}).wrap(b("<div />",{"class":"sb-header-wrapper", height:b(this).outerHeight(),css:{margin:0,padding:0,border:0}}))});b(window).resize(function(){a.enabled&&a.updateHeaders()});b(window).scroll(function(){a.enabled&&a.updateHeaders()});window.location.hash&&setTimeout(function(){a.setHeader(window.location.hash)},600)};a.setHeader=function(c){if(/^#/.test(c)){var f=b(c);c=f.length?a.allHeaders.index(f):0}var d=1;a.allHeaders.each(function(e){if(e==c)d+=b(this).parent().offset().top;else if(e<c)d-=b(this).parent().outerHeight()});a.enabled=false; a.win.animate({scrollTop:d},a.options.animationTime);a.enabled=true;a.updateHeaders()};a.getHeader=function(){return a.allHeaders.filter("."+a.active)};a.updateHeaders=function(){a.currentTop=a.doc.scrollTop()+a.prevTop;a.width=a.$el.innerWidth();var c,f,d,e,g;for(c=0;c<a.len;c++){g=a.allHeaders.eq(c);f=g.is("."+a.options.fixedClass);d=g.parent().offset().top;e=g.parent().outerHeight();if(!f&&a.currentTop>=d){g.addClass(a.options.fixedClass).css({top:a.prevTop,position:"fixed"});a.prevTop+=e;a.nextStop= c+1<a.len?a.allHeaders.eq(c+1).parent().offset().top:0}else if(f&&a.currentTop<=d+e){g.removeClass(a.options.fixedClass).css({top:0,position:"relative"});a.prevTop-=e}}a.allHeaders.removeClass(a.active).css("width",a.width).filter("."+a.options.fixedClass+":last").addClass(a.active);a.options.enableIcons&&a.headers.filter("."+a.options.fixedClass+":not(."+a.options.fixedClass+":last)").find("span").removeClass(a.options.openIcon).addClass(a.options.closedIcon).end().invert().find("span").removeClass(a.options.closedIcon).addClass(a.options.openIcon)}; a.init()};b.squeezeBox.defaultOptions={blockHeaders:"div.header",headers:"h1, h2, h3",fixedClass:"fixed",useUI:true,enableIcons:true,openIcon:"ui-icon-triangle-1-s",closedIcon:"ui-icon-triangle-1-e",animationTime:300,zIndex:100};b.fn.squeezeBox=function(h){return this.each(function(){new b.squeezeBox(this,h)})};b.fn.getsqueezeBox=function(){this.data("squeezeBox")}})(jQuery);
